---
import Navbar from "@components/navbar.astro";
import "../styles/global.css";
import BackToTop from "@components/BackToTop.astro";

const {
  title = "Duolb | Profi Akne-Behandlung & High-End Beauty Tech",
  description = "Duolb ist dein Experte für High-End Hautpflege. Unabhängige Tests zu CO2-Lasern, RF-Microneedling & moderner Akne-Technologie.",
  image = "https://res.cloudinary.com/dc0ax30om/image/upload/v1769795790/duolb_og_xrs8qe.png",
  type = "website" // use "article" on blog posts
} = Astro.props;

const canonicalURL = `https://duolb.com${Astro.url.pathname}`;
---

<!doctype html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

  <title>{title}</title>
  <meta name="description" content={description} />
  <meta name="author" content="Duolb Beauty Redaktion" />
  <meta name="robots" content="index, follow, max-image-preview:large" />
  <meta name="google-adsense-account" content="ca-pub-6824827690109369" />
  <link rel="canonical" href={canonicalURL} />
  <link rel="sitemap" href="/sitemap-index.xml" />

  <meta name="theme-color" content="#958e09" />

  <link rel="preconnect" href="https://res.cloudinary.com" crossorigin />
  <link rel="dns-prefetch" href="https://res.cloudinary.com" />

  <!-- Open Graph -->
  <meta property="og:site_name" content="Duolb Beauty Blog" />
  <meta property="og:type" content={type} />
  <meta property="og:locale" content="de_DE" />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:image" content={image} />
  <meta property="og:image:alt" content="Duolb Beauty Editorial Vorschau" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={image} />



  <!-- Organization Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Duolb",
    "url": "https://duolb.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://res.cloudinary.com/dc0ax30om/image/upload/v1769795884/Capture_d_%C3%A9cran_2026-01-30_185740_yhkku3.png"
    }
  }
  </script>

  <!-- WebSite Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Duolb",
    "url": "https://duolb.com"
  }
  </script>

  <!-- Blog Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Blog",
    "name": "Duolb",
    "url": "https://duolb.com/",
    "description": "Deutschlands Experten-Blog für medizinische Akne-Behandlung, Laser-Technologie und High-End Skincare."
  }
  </script>

  {Astro.url.hostname === 'duolb.pages.dev' && (
    <>
      <meta http-equiv="refresh" content={`0; url=https://duolb.com${Astro.url.pathname}`} />
      <link rel="canonical" href={`https://duolb.com${Astro.url.pathname}`} />
    </>
  )}
</head>

<body class="bg-white text-gray-800">
  <Navbar />
  <slot />
  <script is:inline>
  console.log("Tracker running");

  const payload = JSON.stringify({
    event: "pageview",
    path: window.location.pathname,
    referrer: document.referrer,
    userAgent: navigator.userAgent
  });

  navigator.sendBeacon("/api/track", payload);
</script>
 <BackToTop />

</body>
</html>

