---
// FeaturedPost.astro
const { post } = Astro.props || {};

/* ---------------- NATIVE UTF-8 NORMALIZATION ---------------- */
function cleanText(str = "") {
  try {
    return new TextDecoder("utf-8").decode(new TextEncoder().encode(str));
  } catch {
    return str;
  }
}

const title = cleanText(post?.title ?? "Zeitlose Schönheit");
const description = cleanText(
  post?.description ??
    "Entdecken Sie kuratierte Einblicke in moderne Hautpflege und exklusive Schönheitstrends.",
);
const image = post?.featured_image ?? "/placeholder-beauty.jpg";
const slug = post?.slug ?? "";
---

<section
  class="relative overflow-hidden rounded-[28px] border border-[var(--color-light-taupe)] bg-gradient-to-br from-[var(--color-warm-cream)] via-[var(--color-soft-white)] to-[var(--color-soft-rose)] py-14 lg:py-20 shadow-[var(--shadow-sm)]"
>
  <div class="pointer-events-none absolute -left-16 -top-20 h-72 w-72 rounded-full bg-[var(--color-dusty-mauve)] blur-3xl opacity-[0.10]"></div>
  <div class="pointer-events-none absolute -bottom-24 -right-16 h-80 w-80 rounded-full bg-[var(--color-sage-green)] blur-3xl opacity-[0.10]"></div>
  <div class="pointer-events-none absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.36),rgba(255,255,255,0))]"></div>

<div class="relative z-10 max-w-7xl mx-auto px-6 lg:px-8">
  <div class="flex flex-col lg:flex-row items-center gap-12 lg:gap-20">
    <div class="w-full lg:w-3/5 order-2 lg:order-1">
      <div class="relative group">
        <div
          class="absolute -inset-4 border border-[rgba(230,226,221,0.2)] rounded-sm translate-x-2 translate-y-2 -z-10 transition-transform group-hover:translate-x-0 group-hover:translate-y-0"
        ></div>

        <div class="overflow-hidden rounded-sm shadow-xl aspect-[16/10] lg:aspect-[4/3]">
          <img
            src={image}
            alt={title}
            width="1200"
            height="900"
            fetchpriority="high"
            class="w-full h-full object-cover transition-transform duration-[3s] group-hover:scale-110"
            loading="eager"
          />
        </div>

        <span
          class="absolute -right-8 top-1/2 -rotate-90 text-[10px] tracking-[0.5em] uppercase text-[var(--color-medium-gray)] hidden xl:block"
        >
          Gegr. 2026 Redaktion
        </span>
      </div>
    </div>

    <div class="w-full lg:w-2/5 order-1 lg:order-2 space-y-8">
      <div class="space-y-4">
        <div class="flex items-center gap-3">
          <span class="w-10 h-px bg-[var(--color-gentle-gold)]"></span>
          <span
            class="text-[10px] uppercase tracking-[0.3em] font-bold text-[var(--color-gentle-gold)]"
          >
Top-Artikel
          </span>
        </div>

        <h2
          class="text-3xl md:text-4xl lg:text-5xl font-serif text-[var(--color-deep-slate)] leading-[1.2] tracking-tight"
        >
          {title}
        </h2>

        <p
          class="text-[var(--color-charcoal)] text-base md:text-lg leading-relaxed font-light max-w-md"
        >
          {description}
        </p>
      </div>

      <div class="pt-4">
        <a
          href={`/posts/${slug}`}
          class="group inline-flex items-center gap-6"
        >
          <span
            class="text-[11px] uppercase tracking-[0.3em] font-bold text-[var(--color-terracotta)] border-b border-[rgba(230,226,221,0.7)] pb-2 transition-all group-hover:text-[var(--color-gentle-gold)] group-hover:border-[var(--color-gentle-gold)]"
          >
            Weiterlesen
          </span>
          <div
            class="w-10 h-10 rounded-full border border-[rgba(230,226,221,0.7)] flex items-center justify-center transition-all group-hover:bg-[var(--color-gentle-gold)] group-hover:text-white"
            aria-hidden="true"
          >
            <span class="text-lg">→</span>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>

</section>

<style>
  /* Ensure the font matches your beauty aesthetic */
  h1 {
    font-family: "Cormorant Garamond", serif;
  }
</style>

